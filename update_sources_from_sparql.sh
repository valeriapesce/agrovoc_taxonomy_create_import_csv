#!/bin/bash
cp sources/*.csv sources_backup
curl -H "Accept: text/csv" -o "sources/agrovoc-data-en.csv" --data-urlencode "query=PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> PREFIX skos: <http://www.w3.org/2004/02/skos/core#> SELECT DISTINCT ?code ?label_en ?definition_en ?note ?concept (group_concat (distinct ?alternative_en;separator='|') as ?all_alternative_en) WHERE { 	?concept rdf:type skos:Concept . 	BIND (REPLACE(STR(?concept), '^.*/([^/]*)\$', '\$1') as ?code) . 	?concept skos:prefLabel ?label_en . FILTER (lang(?label_en)= 'en') . 	OPTIONAL {?concept skos:altLabel ?alternative_en . FILTER (lang(?alternative_en)= 'en')} . 	OPTIONAL {?concept skos:definition ?definition . ?definition rdf:value ?definition_en . FILTER (lang(?definition_en)= 'en')} . 	OPTIONAL {?concept skos:scopeNote ?note . FILTER (lang(?note)= 'en')} .    }    GROUP BY ?code ?label_en ?definition_en ?note ?concept ORDER BY ?code" "https://agrovoc.fao.org/sparql"
curl -H "Accept: text/csv" -o "sources/agrovoc-data-fr.csv" --data-urlencode "query=PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> PREFIX skos: <http://www.w3.org/2004/02/skos/core#> SELECT DISTINCT ?code ?label_fr ?definition_fr ?note ?concept (group_concat (distinct ?alternative_fr;separator='|') as ?all_alternative_fr) WHERE { 	?concept rdf:type skos:Concept . 	BIND (REPLACE(STR(?concept), '^.*/([^/]*)\$', '\$1') as ?code) . 	?concept skos:prefLabel ?label_fr . FILTER (lang(?label_fr)= 'fr') . 	OPTIONAL {?concept skos:altLabel ?alternative_fr . FILTER (lang(?alternative_fr)= 'fr')} . 	OPTIONAL {?concept skos:definition ?definition . ?definition rdf:value ?definition_fr . FILTER (lang(?definition_fr)= 'fr')} . 	OPTIONAL {?concept skos:scopeNote ?note . FILTER (lang(?note)= 'fr')} .    }    GROUP BY ?code ?label_fr ?definition_fr ?note ?concept ORDER BY ?code" "https://agrovoc.fao.org/sparql"
curl -H "Accept: text/csv" -o "sources/agrovoc-data-es.csv" --data-urlencode "query=PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> PREFIX skos: <http://www.w3.org/2004/02/skos/core#> SELECT DISTINCT ?code ?label_es ?definition_es ?note ?concept (group_concat (distinct ?alternative_es;separator='|') as ?all_alternative_es) WHERE { 	?concept rdf:type skos:Concept . 	BIND (REPLACE(STR(?concept), '^.*/([^/]*)\$', '\$1') as ?code) . 	?concept skos:prefLabel ?label_es . FILTER (lang(?label_es)= 'es') . 	OPTIONAL {?concept skos:altLabel ?alternative_es . FILTER (lang(?alternative_es)= 'es')} . 	OPTIONAL {?concept skos:definition ?definition . ?definition rdf:value ?definition_es . FILTER (lang(?definition_es)= 'es')} . 	OPTIONAL {?concept skos:scopeNote ?note . FILTER (lang(?note)= 'es')} .    }    GROUP BY ?code ?label_es ?definition_es ?note ?concept ORDER BY ?code" "https://agrovoc.fao.org/sparql"
curl -H "Accept: text/csv" -o "sources/agrovoc-data-ru.csv" --data-urlencode "query=PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> PREFIX skos: <http://www.w3.org/2004/02/skos/core#> SELECT DISTINCT ?code ?label_ru ?definition_ru ?note ?concept (group_concat (distinct ?alternative_ru;separator='|') as ?all_alternative_ru) WHERE { 	?concept rdf:type skos:Concept . 	BIND (REPLACE(STR(?concept), '^.*/([^/]*)\$', '\$1') as ?code) . 	?concept skos:prefLabel ?label_ru . FILTER (lang(?label_ru)= 'ru') . 	OPTIONAL {?concept skos:altLabel ?alternative_ru . FILTER (lang(?alternative_ru)= 'ru')} . 	OPTIONAL {?concept skos:definition ?definition . ?definition rdf:value ?definition_ru . FILTER (lang(?definition_ru)= 'ru')} . 	OPTIONAL {?concept skos:scopeNote ?note . FILTER (lang(?note)= 'ru')} .    }    GROUP BY ?code ?label_ru ?definition_ru ?note ?concept ORDER BY ?code" "https://agrovoc.fao.org/sparql"
curl -H "Accept: text/csv" -o "sources/agrovoc-data-zh.csv" --data-urlencode "query=PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> PREFIX skos: <http://www.w3.org/2004/02/skos/core#> SELECT DISTINCT ?code ?label_zh ?definition_zh ?note ?concept (group_concat (distinct ?alternative_zh;separator='|') as ?all_alternative_zh) WHERE { 	?concept rdf:type skos:Concept . 	BIND (REPLACE(STR(?concept), '^.*/([^/]*)\$', '\$1') as ?code) . 	?concept skos:prefLabel ?label_zh . FILTER (lang(?label_zh)= 'zh') . 	OPTIONAL {?concept skos:altLabel ?alternative_zh . FILTER (lang(?alternative_zh)= 'zh')} . 	OPTIONAL {?concept skos:definition ?definition . ?definition rdf:value ?definition_zh . FILTER (lang(?definition_zh)= 'zh')} . 	OPTIONAL {?concept skos:scopeNote ?note . FILTER (lang(?note)= 'zh')} .    }    GROUP BY ?code ?label_zh ?definition_zh ?note ?concept ORDER BY ?code" "https://agrovoc.fao.org/sparql"
curl -H "Accept: text/csv" -o "sources/agrovoc-data-ar.csv" --data-urlencode "query=PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> PREFIX skos: <http://www.w3.org/2004/02/skos/core#> SELECT DISTINCT ?code ?label_ar ?definition_ar ?note ?concept (group_concat (distinct ?alternative_ar;separator='|') as ?all_alternative_ar) WHERE { 	?concept rdf:type skos:Concept . 	BIND (REPLACE(STR(?concept), '^.*/([^/]*)\$', '\$1') as ?code) . 	?concept skos:prefLabel ?label_ar . FILTER (lang(?label_ar)= 'ar') . 	OPTIONAL {?concept skos:altLabel ?alternative_ar . FILTER (lang(?alternative_ar)= 'ar')} . 	OPTIONAL {?concept skos:definition ?definition . ?definition rdf:value ?definition_ar . FILTER (lang(?definition_ar)= 'ar')} . 	OPTIONAL {?concept skos:scopeNote ?note . FILTER (lang(?note)= 'ar')} .    }    GROUP BY ?code ?label_ar ?definition_ar ?note ?concept ORDER BY ?code" "https://agrovoc.fao.org/sparql"
curl -H "Accept: text/csv" -o "sources/agrovoc-relations.csv" --data-urlencode "query=PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> PREFIX skos: <http://www.w3.org/2004/02/skos/core#> SELECT DISTINCT ?code (group_concat (distinct ?broader;separator='|') as ?all_broader) (group_concat (distinct ?narrower;separator='|') as ?all_narrower) (group_concat (distinct ?related;separator='|') as ?all_related) WHERE { 	?concept rdf:type skos:Concept . 	BIND (REPLACE(STR(?concept), '^.*/([^/]*)\$', '\$1') as ?code) . 	?concept skos:prefLabel ?label_en . FILTER (lang(?label_en)= 'en') . 	OPTIONAL {?concept skos:broader ?broaderURI . BIND (REPLACE(STR(?broaderURI), '^.*/([^/]*)$', '$1') as ?broader)} . 	OPTIONAL {?concept skos:narrower ?narrowerURI . BIND (REPLACE(STR(?narrowerURI), '^.*/([^/]*)$', '$1') as ?narrower)} . 	OPTIONAL {?concept skos:related ?relatedURI . BIND (REPLACE(STR(?relatedURI), '^.*/([^/]*)$', '$1') as ?related)} .    }    GROUP BY ?code ORDER BY ?code" "https://agrovoc.fao.org/sparql"
